<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="./assets/stylesheet/css/valid-form.css">
</head>
  <body>
    <h1 style="margin-top: 300px; text-align: center;">Formulaire et validation</h1>
    <div class="banner">
      <p>Codez une fonction qui assure la sécurité d'une connexion via ce formulaire.</p>
      <p>Le prénom doit faire moins de 15 caractères et le mot de passe doit faire 8 caractères minimum </p>
      <p>Si l'une de ces deux conditions n'est pas remplis, un message d'erreur doit s'afficher par le biais de la div 'error-message'. Dans le cas contraire affichez un message de succès. </p>
      <p>Une checkbox permettra de voir le password en toute lettre.</p>
      <p>Challenge supplémentaire : lorsque l'on commence à entrer une chaine de caractère dans le formulaire 'password', celui-ci prend des contours (border...) rouge. Puis passe au vert dès lors que l'on rentre 8 caractères ou plus.<br>(voir valid-form.html)</p>
    </div>
    <form id="valid-form">
      <input class="default-border" id="login" type="text" label="login" placeholder="Login">
      <input class="default-border" id="pwd" type="password" label="pwd" placeholder="Mot de passe">
      <input class="default-border" id="button" type="submit" value="Submit" style="height: 37px;">
    </form>
    <p class="watchPwd"><input type="checkbox" id="checkbox" name="checkbox">Voir le mot de passe.</p>
    <div id="error-message"></div>
    <script>
    //On récupère les éléments HTML concernés dans des constantes
      const bouton = document.querySelector('#button');
      const userLogin = document.querySelector('#login');
      const password = document.querySelector('#pwd');
      
      //On place un micro sur l'élément bouton
      bouton.addEventListener('click', (event) => {
        //On empeche le comportement par défaut du bouton
        event.preventDefault();
        //On vient établir la vérité des deux expressions dans le 'if': login > 15 char et pwd < 8 char
        if(userLogin.value.length >= 15 || password.value.length < 8){
          console.log('Mauvais login ou mot de passe.');
        }else{
          console.log('success');
        }
      });


      //On va venir vérifier la longueur du password à chaque pression de touche (input/keyup/keydown)
      password.addEventListener('input', (event) => {
        //On vient vérifier que l'on récupère bien chaque caractère à chaque pression de touche.
        console.log(password.value);
        //Si la longueur du password est < 8 alors...
        if(password.value.length < 8){
          //on ajoute la class 'bad-password', puis on retire la class 'good-password'
          password.classList.add('bad-password');
          password.classList.remove('good-password');
        }else{
          //Sinon, on ajoute la class 'good-password', puis on retire la class 'bad-password'
          password.classList.add('good-password');
          password.classList.remove('bad-password');
        }
      });


    </script>
  </body>
</html>
